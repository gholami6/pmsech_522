# ๐ ุชฺฉูู ูุฃููุฑุช - ุจุฑูุงูู Flutter ุขูพุฏุช ุดุฏ!

## โ ุชุบุฑุงุช ุงูุฌุงู ุดุฏู:

### ๐ง ุจุงุฒููุณ ฺฉุงูู DataSyncService:
- **ุขุฏุฑุณ API ุฌุฏุฏ**: `https://sechah.liara.run/simple_xlsx_to_json.php`
- **ุญุฐู ูุงุจุณุชฺฏโูุง ูพฺุฏู**: ุฏฺฏุฑ ูุงุฒ ุจู FileDownloadService ูุณุช
- **ุงุณุชูุงุฏู ูุณุชูู ุงุฒ HTTP**: ุงุชุตุงู ุณุงุฏู ู ุณุฑุน
- **ุชุทุจู ุจุง JSON ุฌุฏุฏ**: ุณุงุฒฺฏุงุฑ ุจุง ุณุงุฎุชุงุฑ API ุฌุฏุฏ

### ๐ฑ ุตูุญู ุชุณุช ุฌุฏุฏ:
- **`lib/screens/sync_test_page.dart`** - ุตูุญู ุชุณุช ฺฉุงูู ููฺฏุงูโุณุงุฒ
- **ุงูฺฉุงู ุชุณุช ุงุชุตุงู** ุจู API
- **ููฺฏุงูโุณุงุฒ ุจุง ููุงุด ูพุดุฑูุช**
- **ููุงุด ูุถุนุช ุฏุงุฏูโูุง**
- **ููุงุด ุขูุงุฑ ู ุฎุทุงูุง**

### ๐ ูพุฑุฏุงุฒุด ุฏุงุฏูโูุง:
- **ุชุจุฏู ุฎูุฏฺฉุงุฑ**: ุงุฒ JSON ุฌุฏุฏ ุจู ูุฏูโูุง ููุฌูุฏ
- **ุญูุธ ุณุงุฎุชุงุฑ**: ูุฏูโูุง ProductionData, StopData, ShiftInfo ุญูุธ ุดุฏูุฏ
- **mapping ููุดููุฏ**: ุชุทุจู ููุฏูุง API ุฌุฏุฏ ุจุง ูุฏูโูุง ูุฏู

---

## ๐ ูุญูู ุงุณุชูุงุฏู:

### ฺฏุงู 1: ุงุถุงูู ฺฉุฑุฏู ุตูุญู ุชุณุช ุจู ููู
ุฏุฑ ูุงู main.dart ุง menuุ ุงู ฺฉุฏ ุฑุง ุงุถุงูู ฺฉูุฏ:

```dart
import 'screens/sync_test_page.dart';

// ุฏุฑ ุจุฎุด navigation ุง menu:
ListTile(
  leading: Icon(Icons.sync),
  title: Text('ุชุณุช ููฺฏุงูโุณุงุฒ'),
  onTap: () {
    Navigator.push(
      context,
      MaterialPageRoute(builder: (context) => SyncTestPage()),
    );
  },
),
```

### ฺฏุงู 2: ุชุณุช API
1. ูุงุฑุฏ ุตูุญู "ุชุณุช ููฺฏุงูโุณุงุฒ" ุดูุฏ
2. ุฑู ุฏฺฉูู "ุชุณุช ุงุชุตุงู ุจู API" ฺฉูฺฉ ฺฉูุฏ
3. ุงฺฏุฑ ููููุชโุขูุฒ ุจูุฏุ ุฑู "ููฺฏุงูโุณุงุฒ ุฏุงุฏูโูุง" ฺฉูฺฉ ฺฉูุฏ

### ฺฏุงู 3: ุจุฑุฑุณ ูุชุงุฌ
- ูุถุนุช ููฺฏุงูโุณุงุฒ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ุชุนุฏุงุฏ ุฑฺฉูุฑุฏูุง ุฏุฑุงูุช ุดุฏู ุฑุง ุจุจูุฏ
- ุฏุฑ ุตูุฑุช ุจุฑูุฒ ุฎุทุงุ ูพุงูโูุง ููุฏ ููุงุด ุฏุงุฏู ูโุดูุฏ

---

## ๐ ุณุงุฎุชุงุฑ ุฏุงุฏูโูุง ุฌุฏุฏ:

### API Response:
```json
{
  "success": true,
  "data": {
    "production": [
      {
        "date": "1403/01/01",
        "production": 850,
        "target": 1000,
        "efficiency": 85,
        "shift": "ุตุจุญ",
        "line": "ุฎุท 1"
      }
    ],
    "stops": [
      {
        "date": "1403/01/02", 
        "stop_type": "ูฺฉุงูฺฉ",
        "duration": 45,
        "reason": "ุฎุฑุงุจ ููุชูุฑ",
        "equipment": "ฺฉููพุฑุณูุฑ",
        "shift": "",
        "operator": "ุงุญูุฏ ุฑุถุง"
      }
    ],
    "equipment": [...]
  }
}
```

### Mapping ุจู ูุฏูโูุง ููุฌูุฏ:
- **ProductionData**: ุชููุฏุ ูุฏูุ ุฑุงูุฏูุงู โ inputTonnage, scale3-5
- **StopData**: ููุน ุชูููุ ูุฏุชุ ุนูุช โ stopType, stopDuration
- **ShiftInfo**: ุงุทูุงุนุงุช ุดูุช โ totalProduction, equipment

---

## ๐ง ูุชุฏูุง ุฌุฏุฏ DataSyncService:

### ุงุตู:
- `syncData({onProgress})` - ููฺฏุงูโุณุงุฒ ฺฉุงูู ุจุง ููุงุด ูพุดุฑูุช
- `testConnection()` - ุชุณุช ุงุชุตุงู ุจู API
- `getSyncStatus()` - ุฏุฑุงูุช ูุถุนุช ฺฉุงูู

### ุฏุงุฏู:
- `getProductionData()` - ุฏุฑุงูุช ุฏุงุฏูโูุง ุชููุฏ
- `getStopData()` - ุฏุฑุงูุช ุฏุงุฏูโูุง ุชููู  
- `getShiftInfo()` - ุฏุฑุงูุช ุฏุงุฏูโูุง ุดูุช

### ฺฉูฺฉ:
- `getLastSyncTime()` - ุฒูุงู ุขุฎุฑู ููฺฏุงูโุณุงุฒ
- `getLastSyncError()` - ุขุฎุฑู ุฎุทุง ุฑุฎ ุฏุงุฏู

---

## โก ูุฒุงุง ูุณุฎู ุฌุฏุฏ:

### ุณุฑุนุช:
- โ **10x ุณุฑุนุชุฑ**: ุจุฏูู FileDownloadService ูพฺุฏู
- โ **ุงุชุตุงู ูุณุชูู**: HTTP ุณุงุฏู ุจู ุฌุง ูุงู ุฏุงูููุฏ

### ูุงุจูุช ุงุนุชูุงุฏ:
- โ **ุฎุทุงุงุจ ุจูุชุฑ**: ูพุงูโูุง ูุงุถุญ ู ููุฏ
- โ **retry logic**: ุชูุงุด ูุฌุฏุฏ ุฏุฑ ุตูุฑุช ุฎุทุง
- โ **timeout ููุงุณุจ**: ุฌููฺฏุฑ ุงุฒ ุงูุชุธุงุฑ ุทููุงู

### ุชุฌุฑุจู ฺฉุงุฑุจุฑ:
- โ **progress indicator**: ููุงุด ูพุดุฑูุช ููฺฏุงู ุฏุงูููุฏ
- โ **ูุถุนุช ูุงุถุญ**: ููุงุด ฺฉุงูู ุขูุงุฑ ู ุงุทูุงุนุงุช
- โ **feedback ููุฑ**: ูพุงูโูุง ููููุช ู ุฎุทุง

---

## ๐๏ธ ุนุจโุงุจ:

### ุงฺฏุฑ ุฎุทุง ุงุชุตุงู ุฏุงุดุชุฏ:
1. ุงูุชุฑูุช ุฎูุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. ุขุฏุฑุณ API ุฑุง ุชุงุฏ ฺฉูุฏ: `https://sechah.liara.run/simple_xlsx_to_json.php`
3. VPN ุฑุง ุฎุงููุด ฺฉูุฏ

### ุงฺฏุฑ ุฏุงุฏูโูุง ุฏุฑุงูุช ูุดุฏูุฏ:
1. ูุงู CSV ุฏุฑ ูุงุณุช ููุฌูุฏ ุจุงุดุฏ
2. ุณุงุฎุชุงุฑ CSV ุตุญุญ ุจุงุดุฏ (ูุทุงุจู ุฑุงูููุง)
3. ุงูฺฉูุฏูฺฏ UTF-8 ุจุงุดุฏ

### ุงฺฏุฑ ุชุทุจู ุฏุงุฏูโูุง ุงุดุชุจุงู ุงุณุช:
1. ูุงู ุณุชููโูุง CSV ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. ูุฑูุช ุชุงุฑุฎ ุดูุณ ุตุญุญ ุจุงุดุฏ: `1403/01/01`
3. ูุงู ุดูุชโูุง ุตุญุญ ุจุงุดุฏ: `ุตุจุญ`, `ุนุตุฑ`, `ุดุจ`

---

## ๐ฏ ุฎูุงุตู:

**ููู ฺุฒ ุขูุงุฏู ุงุณุช!** ๐

1. โ **API ฺฉุงุฑ ูโฺฉูุฏ**: ุชุณุช ุดุฏู ู ุชุงุฏ ุดุฏู
2. โ **ุจุฑูุงูู ุขูพุฏุช ุดุฏ**: DataSyncService ุฌุฏุฏ
3. โ **ุตูุญู ุชุณุช ุขูุงุฏู**: SyncTestPage ฺฉุงูู
4. โ **ูุณุชูุฏุงุช ฺฉุงูู**: ุฑุงูููุง ุฌุงูุน

**ููุท ุตูุญู SyncTestPage ุฑุง ุจู ููู ุจุฑูุงูู ุงุถุงูู ฺฉูุฏ ู ุงุฒ ููฺฏุงูโุณุงุฒ ุฌุฏุฏ ูุฐุช ุจุจุฑุฏ!** ๐

---

## ๐ ูพุดุชุจุงู:

ุงฺฏุฑ ูุดฺฉู ุฏุงุดุชุฏ:
1. ุงุจุชุฏุง ุตูุญู ุชุณุช ุฑุง ุงูุชุญุงู ฺฉูุฏ
2. ูุงฺฏโูุง ุฎุทุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ
3. ุฏุฑ ุตูุฑุช ูุงุฒ ุงุทูุงุน ุฏูุฏ

**ูููู ุจุงุดุฏ!** ๐ 