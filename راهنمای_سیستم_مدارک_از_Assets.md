# راهنمای سیستم مدارک از Assets

## خلاصه
سیستم جدید مدارک که فایل‌ها را از پوشه `assets/documents/` می‌خواند و دسترسی کاربران را کنترل می‌کند.

## فایل‌های ایجاد شده

### 1. `lib/services/document_service.dart`
سرویس Flutter برای ارتباط با API و مدیریت مدارک

### 2. `document_access_api.php`
API سرور برای کنترل دسترسی و ارائه فایل‌ها

### 3. `lib/screens/documents_screen.dart`
صفحه نمایش و مدیریت مدارک در اپلیکیشن

## نحوه راه‌اندازی

### مرحله 1: آماده‌سازی فایل‌ها
1. فایل `document_access_api.php` را در ریشه هاست قرار دهید
2. پوشه `assets/documents/` را در ریشه هاست ایجاد کنید
3. فایل‌های PDF مورد نظر را در پوشه `assets/documents/` قرار دهید

### مرحله 2: تنظیم آدرس سرور
در فایل `lib/services/document_service.dart`:
```dart
static const String baseUrl = 'https://your-domain.com'; // آدرس هاست خود را وارد کنید
```

### مرحله 3: اضافه کردن به منو
در منوی اصلی اپلیکیشن، گزینه "مدارک و مستندات" را اضافه کنید:
```dart
ListTile(
  leading: Icon(Icons.description),
  title: Text('مدارک و مستندات'),
  onTap: () => Navigator.push(
    context,
    MaterialPageRoute(builder: (context) => const DocumentsScreen()),
  ),
),
```

## ویژگی‌های سیستم

### کنترل دسترسی
- **فایل‌های عمومی**: همه کاربران می‌توانند دسترسی داشته باشند
- **فایل‌های خصوصی**: فقط کاربران با موقعیت مشخص شده
- **مدیران**: دسترسی کامل به همه فایل‌ها

### فیلترها
- جستجو بر اساس نام و توضیحات
- فیلتر بر اساس دسته‌بندی
- نمایش فقط فایل‌های عمومی

### دانلود
- فایل‌ها در پوشه Downloads ذخیره می‌شوند
- نمایش اندازه فایل
- آیکون مناسب برای هر نوع فایل

## ساختار فایل پیکربندی

فایل `documents_config.json` به صورت خودکار ایجاد می‌شود:
```json
[
  {
    "id": "unique_id",
    "name": "نام فایل",
    "file_name": "file.pdf",
    "extension": "pdf",
    "size": 1024000,
    "category": "عمومی",
    "is_public": true,
    "allowed_positions": [],
    "description": "توضیحات فایل",
    "upload_date": "2024-01-01 12:00:00"
  }
]
```

## دسته‌بندی‌های پیش‌فرض
- عمومی
- فنی
- اداری
- آموزشی
- گزارش

## نکات مهم
1. فایل‌ها باید از قبل در پوشه `assets/documents/` قرار گیرند
2. سیستم به صورت خودکار فایل‌های جدید را شناسایی می‌کند
3. دسترسی بر اساس موقعیت کاربر کنترل می‌شود
4. فایل‌های خصوصی با برچسب "خصوصی" مشخص می‌شوند

## عیب‌یابی
- اگر فایل‌ها نمایش داده نمی‌شوند، آدرس سرور را بررسی کنید
- اگر دانلود کار نمی‌کند، مجوزهای پوشه را بررسی کنید
- اگر دسترسی محدود است، موقعیت کاربر را بررسی کنید 