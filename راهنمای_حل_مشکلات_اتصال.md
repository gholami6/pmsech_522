# راهنمای حل مشکلات اتصال

## مشکلات شناسایی شده:

### 1. خطای اتصال به localhost:8080
**مشکل:** اپلیکیشن سعی می‌کند به `http://localhost:8080` متصل شود که در دستگاه موبایل در دسترس نیست.

**راه‌حل:** ✅ انجام شد
- آدرس‌های localhost از `_fallbackBaseUrls` حذف شدند
- فقط آدرس `https://sechahoon.liara.run` باقی ماند

### 2. خطای اتصال به سرور نوتیفیکیشن
**مشکل:** سرور `sechahoon.liara.run` در دسترس نیست یا فایل‌های PHP آپلود نشده‌اند.

**راه‌حل:** ✅ انجام شد
- Timeout کاهش یافت (از 10 ثانیه به 5 ثانیه)
- مدیریت خطا بهبود یافت
- تلاش‌های اضافی حذف شدند

### 3. داده‌های عیار موجود است
**وضعیت:** ✅ درست کار می‌کند
- 577 رکورد عیار در دیتابیس موجود است
- محاسبات عیار درست انجام می‌شود

## فایل‌های نیاز به آپلود:

### فایل‌های ضروری:
1. `simple_xlsx_to_json.php` - API اصلی
2. `test_server_status.php` - تست وضعیت سرور
3. `notification_server.php` - سرور نوتیفیکیشن
4. `alert_api.php` - API اعلان‌ها
5. `manager_alert_api.php` - API اعلان‌های مدیریت

### مراحل آپلود:
1. وارد پنل لیارا شوید: https://console.liara.ir
2. پروژه `sechahoon` را انتخاب کنید
3. بخش "فایل منیجر" را باز کنید
4. فایل‌های بالا را آپلود کنید

## تست بعد از آپلود:

### تست 1: وضعیت سرور
```
https://sechahoon.liara.run/test_server_status.php
```

### تست 2: API اصلی
```
https://sechahoon.liara.run/simple_xlsx_to_json.php
```

### تست 3: سرور نوتیفیکیشن
```
https://sechahoon.liara.run/notification_server.php
```

## تغییرات انجام شده در کد:

### 1. SimpleDataSyncService:
- حذف آدرس‌های localhost
- کاهش timeout از 30 به 15 ثانیه
- کاهش تلاش‌های retry از 2 به 1 بار

### 2. ServerNotificationService:
- کاهش timeout از 10 به 5 ثانیه
- بهبود مدیریت خطا

### 3. ServerAlertService:
- کاهش timeout از 10 به 5 ثانیه
- بهبود مدیریت خطا

## نتیجه:
بعد از آپلود فایل‌های PHP به سرور، مشکلات اتصال حل خواهند شد و اپلیکیشن بدون خطا کار خواهد کرد.
