# دستیار هوش مصنوعی - راهنمای استفاده

## 🚀 ویژگی‌ها

این دستیار هوش مصنوعی قابلیت‌های زیر را ارائه می‌دهد:

- **پاسخگویی به سوالات** در مورد آمار تولید و توقفات کارخانه
- **تحلیل داده‌ها** از پایگاه داده موجود
- **رابط کاربری چت** مدرن و کاربرپسند
- **ذخیره تاریخچه** گفتگوها
- **طراحی ریسپانسیو** و سازگار با زبان فارسی

## 📁 ساختار فایل‌ها

```
lib/
├── models/
│   └── chat_message.dart          # مدل پیام‌های چت
├── services/
│   └── ai_assistant_service.dart  # سرویس هوش مصنوعی
├── widgets/
│   └── chat_bubble.dart          # ویجت حباب چت
└── screens/
    └── ai_assistant_page.dart    # صفحه اصلی دستیار
```

## ⚙️ راه‌اندازی

### 1. تنظیم کلید API

برای استفاده از دستیار، باید کلید API OpenAI را تنظیم کنید:

1. فایل `lib/services/ai_assistant_service.dart` را باز کنید
2. خط 18 را پیدا کنید:
   ```dart
   String get _apiKey => 'your-openai-api-key-here';
   ```
3. کلید API خود را جایگزین کنید:
   ```dart
   String get _apiKey => 'sk-your-actual-api-key-here';
   ```

### 2. نصب وابستگی‌ها

اطمینان حاصل کنید که وابستگی‌های زیر در `pubspec.yaml` موجود هستند:

```yaml
dependencies:
  http: ^1.2.0
  hive: ^2.2.3
  hive_flutter: ^1.1.0
```

### 3. اجرای برنامه

```bash
flutter pub get
flutter run
```

## 🎯 نحوه استفاده

### دسترسی به دستیار

1. وارد برنامه شوید
2. در داشبورد اصلی، روی آیکن منو (سه نقطه) کلیک کنید
3. گزینه "دستیار هوش مصنوعی" را انتخاب کنید

### نمونه سوالات

می‌توانید سوالات زیر را از دستیار بپرسید:

- **کدام تجهیزات بیشترین توقف را داشته‌اند؟**
- **میانگین مدت توقف چقدر است؟**
- **آمار تولید در ماه گذشته چگونه بوده؟**
- **کدام شیفت بیشترین تولید را داشته؟**
- **تعداد کل توقفات در هفته گذشته چقدر بوده؟**
- **کدام تجهیزات بیشترین تولید را داشته‌اند؟**

## 🔧 تنظیمات پیشرفته

### تغییر مدل AI

برای تغییر مدل هوش مصنوعی، فایل `ai_assistant_service.dart` را ویرایش کنید:

```dart
'model': 'gpt-4', // یا 'gpt-3.5-turbo'
```

### تنظیم پارامترهای AI

```dart
'max_tokens': 1000,    // حداکثر تعداد توکن‌ها
'temperature': 0.7,    // خلاقیت پاسخ (0-1)
```

### شخصی‌سازی پیام سیستم

در متد `getAIResponse`، پیام سیستم را ویرایش کنید:

```dart
'role': 'system',
'content': '''شما یک دستیار هوش مصنوعی برای سیستم مدیریت تولید کارخانه هستید...'''
```

## 🛠️ توسعه و گسترش

### اضافه کردن قابلیت‌های جدید

1. **مدل‌های جدید**: در پوشه `models/` مدل‌های جدید اضافه کنید
2. **سرویس‌های جدید**: در پوشه `services/` سرویس‌های جدید ایجاد کنید
3. **ویجت‌های جدید**: در پوشه `widgets/` ویجت‌های جدید بسازید

### اتصال به API‌های دیگر

برای اتصال به API‌های دیگر هوش مصنوعی:

1. کلاس `AIAssistantService` را کپی کنید
2. متد `getAIResponse` را برای API جدید تغییر دهید
3. پارامترهای درخواست را تنظیم کنید

## 🔒 امنیت

### نکات امنیتی

- **کلید API را در کد قرار ندهید**: از متغیرهای محیطی استفاده کنید
- **محدودیت درخواست**: تعداد درخواست‌ها را محدود کنید
- **رمزگذاری**: داده‌های حساس را رمزگذاری کنید

### استفاده از متغیرهای محیطی

برای استفاده از فایل `.env`:

1. پکیج `flutter_dotenv` را نصب کنید:
   ```yaml
   dependencies:
     flutter_dotenv: ^5.1.0
   ```

2. فایل `.env` ایجاد کنید:
   ```
   OPENAI_API_KEY=your-api-key-here
   ```

3. در `main.dart` بارگذاری کنید:
   ```dart
   import 'package:flutter_dotenv/flutter_dotenv.dart';
   
   void main() async {
     await dotenv.load(fileName: ".env");
     // ...
   }
   ```

## 🐛 عیب‌یابی

### مشکلات رایج

1. **خطای API Key**: کلید API را بررسی کنید
2. **خطای شبکه**: اتصال اینترنت را بررسی کنید
3. **خطای داده**: داده‌های موجود در دیتابیس را بررسی کنید

### لاگ‌ها

برای مشاهده لاگ‌ها:

```dart
print('AI Response: $aiResponse');
print('Error: $e');
```

## 📞 پشتیبانی

برای گزارش مشکلات یا پیشنهادات:

1. Issue در GitHub ایجاد کنید
2. با تیم توسعه تماس بگیرید
3. مستندات را بررسی کنید

## 📄 لایسنس

این پروژه تحت لایسنس MIT منتشر شده است. 